pipeline {
    agent any
    stages {
        stage ('Compile Stage'){
            steps {
                withMaven(maven : 'maven_3_5_0')
                    sh 'mvn clean compile'
            }
        }
        stage ('Testing Stage') {
                steps {
                withMaven(maven : 'maven_3_5_0')
                    sh 'mvn test'
            }
        }
        stage ('Deployment Stage') {
            steps {
                withMaven(maven : 'maven_3_5_0')
                    sh 'mvn deploy'   
            }
        }
        stages{
            stage('sourcecode checkout'){
                steps{
                    git credentialsid:GIT_CREDENTIAL,
                    url:'https://github.com/ponnamanda-srinu/jenkins-projects.git'
                    branch:'main'
                }
                stage('Artifact clean'){
                    stage{
                        sh'./gradlew'
                    }
                }
            }
        }

        
    }
}
